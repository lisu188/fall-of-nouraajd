cmake_minimum_required(VERSION 3.3)
project(game)

include(${CMAKE_SOURCE_DIR}/cmake/cotire.cmake)
set(CMAKE_MODULE_PATH "${CMAKE_MODULE_PATH};${CMAKE_SOURCE_DIR}/cmake")

set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++14 -include cmath -Wno-deprecated-declarations -Wno-unused-local-typedefs -Wno-attributes -Wno-inline")

set(CMAKE_CXX_FLAGS_RELEASE "${CMAKE_CXX_FLAGS_RELEASE} -O3")
set(CMAKE_CXX_FLAGS_DEBUG "${CMAKE_CXX_FLAGS_DEBUG} -g3")

file(GLOB_RECURSE GAME_SRC ${CMAKE_SOURCE_DIR}/src/**.cpp ${CMAKE_SOURCE_DIR}/src/**.h)

find_package(Boost 1.60 COMPONENTS python3 filesystem system REQUIRED)
find_package(PythonInterp 3.5 REQUIRED)
find_package(PythonLibs 3.5 REQUIRED)
find_package(SDL2 REQUIRED)
find_package(SDL2_image REQUIRED)
find_package(SDL2_ttf REQUIRED)
find_package(JsonCpp REQUIRED)

include_directories(${Boost_INCLUDE_DIRS})
include_directories(${PYTHON_INCLUDE_DIRS})
include_directories(${SDL2_INCLUDE_DIR})
include_directories(${SDL2_IMAGE_INCLUDE_DIR})
include_directories(${SDL2_TTF_INCLUDE_DIR})
include_directories(${JSONCPP_INCLUDE_DIRS})

include_directories(${CMAKE_SOURCE_DIR}/src)

include_directories(${CMAKE_SOURCE_DIR}/vstd)

python_add_module(_game ${GAME_SRC})
target_link_libraries(_game ${Boost_LIBRARIES} ${PYTHON_LIBRARIES} ${SDL2_LIBRARY} ${SDL2_IMAGE_LIBRARY} ${SDL2_TTF_LIBRARY} ${JSONCPP_LIBRARIES})

configure_file(res/config/armors.json config/armors.json)
configure_file(res/config/buildings.json config/buildings.json)
configure_file(res/config/effects.json config/effects.json)
configure_file(res/config/interactions.json config/interactions.json)
configure_file(res/config/items.json config/items.json)
configure_file(res/config/misc.json config/misc.json)
configure_file(res/config/monsters.json config/monsters.json)
configure_file(res/config/potions.json config/potions.json)
configure_file(res/config/slots.json config/slots.json)
configure_file(res/config/tiles.json config/tiles.json)
configure_file(res/config/weapons.json config/weapons.json)

configure_file(res/maps/map1/config.json maps/map1/config.json)
configure_file(res/maps/map1/map.json maps/map1/map.json)
configure_file(res/maps/map1/script.py maps/map1/script.py)

configure_file(res/maps/map2/config.json maps/map2/config.json)
configure_file(res/maps/map2/map.json maps/map2/map.json)
configure_file(res/maps/map2/script.py maps/map2/script.py)

configure_file(res/maps/empty/config.json maps/empty/config.json)
configure_file(res/maps/empty/map.json maps/empty/map.json)
configure_file(res/maps/empty/script.py maps/empty/script.py)

configure_file(res/plugins/effect.py plugins/effect.py)
configure_file(res/plugins/interaction.py plugins/interaction.py)
configure_file(res/plugins/object.py plugins/object.py)
configure_file(res/plugins/potion.py plugins/potion.py)
configure_file(res/plugins/tile.py plugins/tile.py)

configure_file(res/images/interactions/backstab.png images/interactions/backstab.png)
configure_file(res/images/interactions/deathstrike.png images/interactions/deathstrike.png)
configure_file(res/images/interactions/endlesspain.png images/interactions/endlesspain.png)
configure_file(res/images/interactions/chloroform.png images/interactions/chloroform.png)
configure_file(res/images/interactions/shadowbolt.png images/interactions/shadowbolt.png)
configure_file(res/images/interactions/strike.png images/interactions/strike.png)
configure_file(res/images/interactions/doubleattack.png images/interactions/doubleattack.png)
configure_file(res/images/interactions/attack.png images/interactions/attack.png)
configure_file(res/images/interactions/bloodthirst.png images/interactions/bloodthirst.png)
configure_file(res/images/interactions/armorofendlesswinter.png images/interactions/armorofendlesswinter.png)
configure_file(res/images/interactions/chaosblast.png images/interactions/chaosblast.png)
configure_file(res/images/interactions/sneakattack.png images/interactions/sneakattack.png)
configure_file(res/images/interactions/barrier.png images/interactions/barrier.png)
configure_file(res/images/interactions/bloodlash.png images/interactions/bloodlash.png)
configure_file(res/images/interactions/mutilation.png images/interactions/mutilation.png)
configure_file(res/images/interactions/lethalpoison.png images/interactions/lethalpoison.png)
configure_file(res/images/interactions/devour.png images/interactions/devour.png)
configure_file(res/images/interactions/frostbolt.png images/interactions/frostbolt.png)
configure_file(res/images/interactions/magicmissile.png images/interactions/magicmissile.png)
configure_file(res/images/interactions/stun.png images/interactions/stun.png)
configure_file(res/images/interactions/abyssalshadows.png images/interactions/abyssalshadows.png)

configure_file(res/images/arrows/left.png images/arrows/left.png)
configure_file(res/images/arrows/right.png images/arrows/right.png)
configure_file(res/images/item.png images/item.png)

configure_file(res/images/monsters/pritzmage/time.json images/monsters/pritzmage/time.json)
configure_file(res/images/monsters/pritzmage/2.png images/monsters/pritzmage/2.png)
configure_file(res/images/monsters/pritzmage/0.png images/monsters/pritzmage/0.png)
configure_file(res/images/monsters/pritzmage/3.png images/monsters/pritzmage/3.png)
configure_file(res/images/monsters/pritzmage/1.png images/monsters/pritzmage/1.png)
configure_file(res/images/monsters/gooby.png images/monsters/gooby.png)

configure_file(res/images/monsters/octobogz/time.json images/monsters/octobogz/time.json)
configure_file(res/images/monsters/octobogz/0.png images/monsters/octobogz/0.png)
configure_file(res/images/monsters/octobogz/1.png images/monsters/octobogz/1.png)

configure_file(res/images/monsters/pritz/time.json images/monsters/pritz/time.json)
configure_file(res/images/monsters/pritz/0.png images/monsters/pritz/0.png)
configure_file(res/images/monsters/pritz/1.png images/monsters/pritz/1.png)


configure_file(res/images/items/boots/eradicatorsboots.png images/items/boots/eradicatorsboots.png)

configure_file(res/images/items/potions/bless.png images/items/potions/bless.png)
configure_file(res/images/items/potions/poison.png images/items/potions/poison.png)
configure_file(res/images/items/potions/life.png images/items/potions/life.png)
configure_file(res/images/items/potions/mana.png images/items/potions/mana.png)
configure_file(res/images/items/scroll.png images/items/scroll.png)

configure_file(res/images/items/armors/leatherarmor.png images/items/armors/leatherarmor.png)
configure_file(res/images/items/armors/robe.png images/items/armors/robe.png)
configure_file(res/images/items/armors/platearmor.png images/items/armors/platearmor.png)
configure_file(res/images/items/armors/chestplateofnorth.png images/items/armors/chestplateofnorth.png)

configure_file(res/images/items/gloves/glovesoftheassasin.png images/items/gloves/glovesoftheassasin.png)

configure_file(res/images/items/weapons/longsword.png images/items/weapons/longsword.png)
configure_file(res/images/items/weapons/chaossword.png images/items/weapons/chaossword.png)
configure_file(res/images/items/weapons/broadsword.png images/items/weapons/broadsword.png)
configure_file(res/images/items/weapons/staffoftheabyss.png images/items/weapons/staffoftheabyss.png)
configure_file(res/images/items/weapons/void.png images/items/weapons/void.png)
configure_file(res/images/items/weapons/bladeofdarkdreams.png images/items/weapons/bladeofdarkdreams.png)
configure_file(res/images/items/weapons/knife.png images/items/weapons/knife.png)
configure_file(res/images/items/weapons/shortsword.png images/items/weapons/shortsword.png)
configure_file(res/images/items/weapons/stiletto.png images/items/weapons/stiletto.png)
configure_file(res/images/items/weapons/shadowblade.png images/items/weapons/shadowblade.png)
configure_file(res/images/items/weapons/staff.png images/items/weapons/staff.png)
configure_file(res/images/items/weapons/daggerofvileheart.png images/items/weapons/daggerofvileheart.png)
configure_file(res/images/items/weapons/sword.png images/items/weapons/sword.png)
configure_file(res/images/items/weapons/valkyrie.png images/items/weapons/valkyrie.png)
configure_file(res/images/items/weapons/shortstaff.png images/items/weapons/shortstaff.png)
configure_file(res/images/items/weapons/wand.png images/items/weapons/wand.png)
configure_file(res/images/items/weapons/dagger.png images/items/weapons/dagger.png)

configure_file(res/images/items/helmets/crownofnightmares.png images/items/helmets/crownofnightmares.png)

configure_file(res/images/items/belts/undestructiblebelt.png images/items/belts/undestructiblebelt.png)

configure_file(res/images/buildings/cave.png images/buildings/cave.png)
configure_file(res/images/buildings/market.png images/buildings/market.png)
configure_file(res/images/buildings/teleporter.png images/buildings/teleporter.png)
configure_file(res/images/buildings/dungeon.png images/buildings/dungeon.png)
configure_file(res/images/terrain.png images/terrain.png)

configure_file(res/images/players/assasin.png images/players/assasin.png)
configure_file(res/images/players/sorcerer.png images/players/sorcerer.png)
configure_file(res/images/players/warrior.png images/players/warrior.png)

configure_file(res/images/tiles/lava.png images/tiles/lava.png)
configure_file(res/images/tiles/beach.png images/tiles/beach.png)
configure_file(res/images/tiles/wasteland.png images/tiles/wasteland.png)
configure_file(res/images/tiles/mountain.png images/tiles/mountain.png)
configure_file(res/images/tiles/swamp.png images/tiles/swamp.png)
configure_file(res/images/tiles/water.png images/tiles/water.png)
configure_file(res/images/tiles/road.png images/tiles/road.png)
configure_file(res/images/tiles/snow.png images/tiles/snow.png)
configure_file(res/images/tiles/ground.png images/tiles/ground.png)
configure_file(res/images/tiles/grass.png images/tiles/grass.png)
configure_file(res/images/tiles/desert.png images/tiles/desert.png)

configure_file(res/game.py game.py)

configure_file(test.py test.py)

cotire(_game)